<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HW Hangman HW</title>
  <link rel="stylesheet" type="text/css" href="assets/css/reset.css">
  <link rel="stylesheet" type="text/css" href="assets/css/style.css">
  <link rel="stylesheet" type="text/css" href="https://bootswatch.com/darkly/bootstrap.min.css"
</head>

<body>
<div class="jumbotron">
  <h1 class="text-center">Hangman</h1>
  <div class="text-center">Text here</div>
</div>
<div class="container">
  <div class="row">
    <div class="col-md-2 test-left">
      <p>Put you tube stuff here</p>
    </div>
    <div class="col-md-6 text-center" id= "hangmanAreaHTML">
      <h2 id="gameCmdHtml">Press space bar to start playing</h2>
      <p id="line1Html">   0</p>
      <p id="line2Html">>--|--<</p>
      <p id="line3Html">  / \</p>
      <br>
      <h2 id="searchWordHtml"> ***** </h2>
      <br
      <p id="unGuessedHtml"></p>
      <p id="allGuessedHtml"></p>
      <p id="guessesLeftHtml"></p>
      <!--Put hangman stuff here -->
    </div>
    <div class="col-md-4 text-center" id="statsAreaHTML">
      <h2>Statistics</h2>
      <br><br>
      <p id='longestCorrectStreak'></p>
      <p id='gamesWonHtml'></p>
      <p id='gamesLostHtml'></p>

    </div>
  </div>
</div>

<script>
{
//global varibals
  var firstGame = true;
  var abcObj ={
    letterAll: [],
    alreadyGuessed:[]
  }
  var wordFindObj ={
    searchWord: "",
    searchWordArray: [],
    searchWordArrayLowerCase: [],
    foundLettersArray: [],
    foundLettersString: "",
    foundLettersArrayToString: function(){
      this.foundLettersString = ""; //reset to ensure it's clear before creating a new one
      console.log("this.foundLettersArray.length = "+ this.foundLettersArray.length);
      for(var x=0;x<this.foundLettersArray.length;x++){
        this.foundLettersString = this.foundLettersString + this.foundLettersArray[x];

      }
      console.log("this.foundLettersString =" +this.foundLettersString )
      console.log("this.foundLettersArray = "+ this.foundLettersArray);
    }
  }
  var gameWordsObj={
    gameAlreadyPlayNdx: [],
    gameWordList: [],
    gameArtistList: [],
    gameYouTubeList: [],
    initAlreadyPlayNdx: function(){
      for(var x=0;x<this.gameWordList.length;x++){
        this.gameAlreadyPlayNdx[x] = x;
      }
    }
  }


  var stringAbcGuessed;
  var stringAbcLeft;
  var lettersCorrect;
  var lettersMissed;
  var percentGuessedRight;
  var gamesWon;
  var gamesLost;
  var guessesLeft;
  var percentGamesWon;
  var currentWinningStreak;
  var longestWinningStreak;
  var hangmanAreaText;
  var gameCmdTxt;
  var userGuess;
  var gameOver;
  //var searchWord = "football";
//end gobal variables

//initilization

  //initilizeABC();
  //stringABC();

//end initization

//control of hangman area



//capture Key Clicks
  document.onkeyup = function(event) {
    //wait for space bar hit
    if (event.keyCode === 32 && firstGame === true){
      //initilize first game if space bar hit
      console.log("space bar -- initFirstGame")
      initFirstGame();
      //initFind();
    }
    //if not space bar is it a valid guess
    else if (!gameOver && !(event.keyCode === 32)){
      console.log("!gameOver & not space bar")
      var userGuess = String.fromCharCode(event.keyCode).toLowerCase();
      var letterAllNdx=abcObj.letterAll.indexOf(userGuess);
      console.log("123 userGuess = " + userGuess + " letterAllNdx = " + letterAllNdx);
      //if vaild guess
      if(abcObj.letterAll.includes(userGuess) === true && abcObj.alreadyGuessed[letterAllNdx] === false){
        console.log("if(abcObj.letterAll.includes(userGuess) === true && abcObj.alreadyGuessed[letterAllNdx] === false)")
        evalUserGuess(userGuess , letterAllNdx);
        //update stats

        //update & output hangmanAreaHTML

      }//end if valid guess
    }//end of game not over
    else{ //wait for space bar to continue
      if (event.keyCode === 32){
      //initilize next game if space bar hit
      //initFind();
      initNextGame();
      }
    }
  }

//control of stats area

//end control of stats area



//functions

  function updateGuessed(ndx){
    //track the letter guessed
    abcObj.alreadyGuessed[ndx]=true;
    stringABC();
    //output new ABC's to screen
    var unGuessedStringText  ="<p id='unGuessedHtml'>" + stringAbcLeft + "</p>" ;
    var guessedStringText = "<p id='allGuessedHtml'>" + stringAbcGuessed + "</p>";
    var guessesLeftText ="<p id= 'guessesLeftHtml'> Tries remaining = " + guessesLeft +"</p>";
    document.querySelector('#unGuessedHtml').innerHTML = unGuessedStringText;
    document.querySelector('#allGuessedHtml').innerHTML = guessedStringText;
    document.querySelector('#guessesLeftHtml').innerHTML = guessesLeftText;
  }//end updateGuessed

  function initilizeABC(){
    abcObj.letterAll= ["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];
    abcObj.alreadyGuessed= [false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false];
  } //end of initilizeABC

  function initFirstGame(){
    initilizeFirstSearchWord();
    initNewGame();
    gamesWon = 0;
    gamesLost = 0;
    percentGamesWon = 0;
    longestWinningStreak = 0;
    outputHangmanArea(-1);
  } // end of initFirstGame

  function initNewGame(){
    initilizeABC();
    stringABC();
    initilizeSearchWord();
    lettersCorrect = 0;
    lettersMissed = 0;
    guessesLeft = 10;
    percentGuessedRight = 0;
    currentWinningStreak = 0;
    gameOver = false;
  } // end of initNewGame
  function stringABC(){
    stringAbcLeft ="Letters remaining = |";
    stringAbcGuessed="Letters already guessed = |";
    for (var x = 0 ; x < abcObj.letterAll.length;x++){
      if(abcObj.alreadyGuessed[x]==false){
        stringAbcLeft=stringAbcLeft.concat(abcObj.letterAll[x])+"|";
      } // end of if
      else{
        stringAbcLeft=stringAbcLeft.concat(" ")+"|";
        stringAbcGuessed=stringAbcGuessed.concat(abcObj.letterAll[x])+"|";
      } // end of else
    }// end of for
  }//end of stringABC()

  function outputHangmanArea(ndx){
    if(ndx == -1){
      initilizeHangmanArea();
    }
    else{
      //switch on the numbers of missed guesses
      switch (ndx) {
        case 0:
          //nothing changes
          break;
        case 1:
          var line1Text = "<p id='line1Html'>   0</p>";
          document.querySelector('#line1Html').innerHTML = line1Text;
          break;
        case 2:
          var line2Text = "<p id='line2Html'>|</p>";
          document.querySelector('#line2Html').innerHTML = line2Text;
          break;
        case 3:
          var line2Text = "<p id='line2Html'>-| </p>";
          document.querySelector('#line2Html').innerHTML = line2Text;
          break;
        case 4:
          var line2Text = "<p id='line2Html'>-|-</p>";
          document.querySelector('#line2Html').innerHTML = line2Text;
          break;
        case 5:
          var line2Text = "<p id='line2Html'>--|-</p>";
          document.querySelector('#line2Html').innerHTML = line2Text;
          break;
        case 6:
          var line2Text = "<p id='line2Html'>--|--</p>";
          document.querySelector('#line2Html').innerHTML = line2Text;
          break;
        case 7:
          var line2Text = "<p id='line2Html'>>--|--</p>";
          document.querySelector('#line2Html').innerHTML = line2Text;
          break;
        case 8:
          var line2Text = "<p id='line2Html'>>--|--<</p>";
          document.querySelector('#line2Html').innerHTML = line2Text;
          break;
        case 9:
          var line3Text = "<p id='line3Html'>/</p>";
          document.querySelector('#line3Html').innerHTML = line3Text;
          break;
        case 10:
          var line3Text = "<p id='line3Html'>/ \\</p>";
          document.querySelector('#line3Html').innerHTML = line3Text;
          break;
      }
    } //end else not init
      var searchWordText =   "<h2 id='searchWordHtml'>"+ wordFindObj.foundLettersString + "</h2>"
      document.querySelector('#searchWordHtml').innerHTML = searchWordText;
      //"<p 'guessesLeftHtml'> Tries remaining = " + guessesLeft +"</p>"
    //} //end else not init
  } //end outputHangmanArea()

  function initilizeSearchWord(){
  //function  initFind(input){
    var currentGameNdx = gameWordsObj.gameAlreadyPlayNdx[Math.floor(Math.random()*gameWordsObj.gameAlreadyPlayNdx.length)];
    console.log("gameWordsObj.gameWordList[currentGameNdx] = " + gameWordsObj.gameWordList[currentGameNdx] + " ndx = " + currentGameNdx);
    wordFindObj.searchWordArray = gameWordsObj.gameWordList[currentGameNdx].split("");
    var  tempWord = gameWordsObj.gameWordList[currentGameNdx].toLowerCase();
    console.log("tempWord = "+tempWord)
    wordFindObj.searchWordArrayLowerCase = tempWord.split("");
    console.log("wordFindObj.searchWordArrayLowerCase = "+wordFindObj.searchWordArrayLowerCase)
    for(var x = 0; x < wordFindObj.searchWordArray.length;x++){
      if (wordFindObj.searchWordArray[x] === " ") {
        wordFindObj.foundLettersArray[x] = "  ";
      }
      else{
        wordFindObj.foundLettersArray[x] = "*";
      }
      //wordFindObj.foundLettersString = wordFindObj.foundLettersString + wordFindObj.foundLettersArray[x];
    }//end for
    wordFindObj.foundLettersArrayToString();
    if(true){console.log("277 foundLettersString = "+ wordFindObj.foundLettersString);}
    outputHangmanArea(0);
  }//end initFind()

  function evalUserGuess(userGuess,letterAllNdx){
    //is the guess is in the search Word
    if(wordFindObj.searchWordArrayLowerCase.includes(userGuess)){
      var searchWordArrayNdx=wordFindObj.searchWordArrayLowerCase.indexOf(userGuess);
      var searchWordArrayLastNdx=wordFindObj.searchWordArrayLowerCase.lastIndexOf(userGuess);
      console.log("wordFindObj.searchWordArrayLowerCase = "+ wordFindObj.searchWordArrayLowerCase)
      console.log("searchWordArrayNdx = "+ searchWordArrayNdx +" searchWordArrayLastNdx = " +searchWordArrayLastNdx)
      //if the guess is in the word we are looking for add the letter to the word and update the abc lines
      wordFindObj.foundLettersArray[searchWordArrayNdx] = wordFindObj.searchWordArray[searchWordArrayNdx];
      wordFindObj.foundLettersArrayToString();
      updateGuessed(letterAllNdx);
      //now check to see if the letter is in multiple places in the search word we are looking for
      if (searchWordArrayNdx !=searchWordArrayLastNdx) {
        for (var x=searchWordArrayNdx;x<wordFindObj.searchWordArray.length;x++){
          console.log("searchWordArrayNdx = "+ searchWordArrayNdx)
          searchWordArrayNdx++
          searchWordArrayNdx = wordFindObj.searchWordArray.indexOf(userGuess, searchWordArrayNdx);
          console.log("searchWordArrayNdx ++ = "+ searchWordArrayNdx)
          if(searchWordArrayNdx===-1){
            break;
          }
          wordFindObj.foundLettersArray[searchWordArrayNdx] = wordFindObj.searchWordArray[searchWordArrayNdx];
          wordFindObj.foundLettersArrayToString();
        }
      }
      outputHangmanArea(0); //not a missed guess - don't add to the hangman
      //output stats
    }// end of correct guess
    else{
      //else incorrect guess
      //increment fial counter
      lettersMissed++;
      guessesLeft--;
      outputHangmanArea(lettersMissed);
      updateGuessed(letterAllNdx);
      //putput stats
    }
  }// end evalUsserGuess()

  function initilizeHangmanArea(){
    hangmanAreaText = "<h2 id='gameCmdHtml'>Choose a letter</h2>" +
      "<p id='line1Html'></p>" +
      "<p id='line2Html'></p>" +
      "<p id='line3Html'> </p>" +
      "<br>"+
      "<h2 id='searchWordHtml'>"+ wordFindObj.foundLettersString + "</h2>"+
      "<br>"+
      "<p id='unGuessedHtml'>" + stringAbcLeft + "</p>" +
      "<p id='allGuessedHtml'>" + stringAbcGuessed + "</p>" +
      "<p id='guessesLeftHtml'> Tries remaining = " + guessesLeft +"</p>"
    document.querySelector('#hangmanAreaHTML').innerHTML = hangmanAreaText;
  }
  function updateStats(wasGuessCorrect){

  }

  function initilizeFirstSearchWord(){
    //this is the hard way!
    //need to add text file reader here.....
console.log("initilizeFirstSearchWord");
    gameWordsObj.gameArtistList = ['3 Doors Down',
                                   'Disturbed',
                                   'Red Sun Rising',
                                   'Bring Me The Horizon',
                                   'Muse',
                                   'SIXX:A.M.',
                                   'Five Finger Death Punch',
                                   'From Ashes To New',
                                   'Papa Roach',
                                   'Deftones'];
    gameWordsObj.gameWordList =['In The Dark',
                                'The Sound Of Silence',
                                'Emotionless',
                                'Happy Song',
                                'Reapers',
                                'Rise',
                                'My Nemesis',
                                'Through It All',
                                'Falling Apart',
                                'Prayers Triangles'];

    gameWordsObj.gameYouTubeList= ['https://www.youtube.com/watch?v=Ch6PtKm_w7w',
                                   'https://www.youtube.com/watch?v=u9Dg-g7t2l4',
                                   'https://www.youtube.com/watch?v=awyBrr0P69A',
                                   'https://www.youtube.com/watch?v=GBRAnuT48qo',
                                   'https://www.youtube.com/watch?v=gcNEC9NaJuE',
                                   'https://www.youtube.com/watch?v=gcNEC9NaJuE',
                                   'https://www.youtube.com/watch?v=heDGwljdmvM',
                                   'https://www.youtube.com/watch?v=5nSmdllDCtU',
                                   'https://www.youtube.com/watch?v=aqYnMSUTFGU',
                                   'https://www.youtube.com/watch?v=Aztiwn17vpE'];
    gameWordsObj.initAlreadyPlayNdx();
  }


// end functions
}// end of scripts
</script>


<p>My second Paragraph.</p>
</body>
</html>